<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SIGNAL — AI News</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Sora:wght@700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #f7f7fb;
      --white: #ffffff;
      --purple: #6c5ce7;
      --purple-light: #a29bfe;
      --purple-glow: rgba(108,92,231,0.10);
      --green: #00b894;
      --text: #1a1a2e;
      --muted: #8888aa;
      --border: #e8e8f0;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { background: var(--bg); color: var(--text); font-family: 'Inter', sans-serif; font-weight: 400; }

    header { background: var(--white); border-bottom: 1px solid var(--border); padding: 0 48px; position: sticky; top: 0; z-index: 100; }
    .header-inner { max-width: 1200px; margin: 0 auto; display: flex; align-items: center; justify-content: space-between; height: 64px; }
    .logo { font-family: 'Sora', sans-serif; font-size: 20px; font-weight: 800; letter-spacing: -0.5px; }
    .logo em { color: var(--purple); font-style: normal; }
    nav { display: flex; gap: 4px; }
    nav a { color: var(--muted); text-decoration: none; font-size: 12px; font-weight: 500; letter-spacing: 0.05em; text-transform: uppercase; padding: 7px 14px; border-radius: 20px; transition: all 0.2s; }
    nav a:hover, nav a.active { color: var(--purple); background: var(--purple-glow); }
    .header-right { display: flex; align-items: center; gap: 8px; font-size: 11px; color: var(--muted); }
    .live-dot { width: 6px; height: 6px; background: var(--green); border-radius: 50%; animation: pulse 2s infinite; }
    @keyframes pulse { 0%,100%{opacity:1} 50%{opacity:0.2} }

    .hero { background: var(--white); border-bottom: 1px solid var(--border); padding: 80px 48px 72px; text-align: center; }
    .hero-inner { max-width: 680px; margin: 0 auto; }
    .hero-label { display: inline-block; font-size: 11px; font-weight: 600; letter-spacing: 0.12em; text-transform: uppercase; color: var(--purple); background: var(--purple-glow); padding: 5px 14px; border-radius: 20px; margin-bottom: 28px; }
    .hero h1 { font-family: 'Sora', sans-serif; font-size: 52px; font-weight: 800; line-height: 1.1; letter-spacing: -2px; margin-bottom: 20px; }
    .hero h1 em { color: var(--purple); font-style: normal; }
    .hero p { font-size: 16px; color: var(--muted); line-height: 1.7; margin-bottom: 40px; }
    .hero-stats { display: flex; justify-content: center; gap: 56px; }
    .stat-num { font-family: 'Sora', sans-serif; font-size: 30px; font-weight: 800; }
    .stat-num em { color: var(--purple); font-style: normal; }
    .stat-label { font-size: 11px; color: var(--muted); letter-spacing: 0.06em; text-transform: uppercase; margin-top: 4px; }

    .wrap { max-width: 1200px; margin: 0 auto; padding: 0 48px; }
    .section-eyebrow { font-size: 11px; font-weight: 600; letter-spacing: 0.12em; text-transform: uppercase; color: var(--muted); padding: 48px 0 16px; }
    .featured-card { background: var(--white); border: 1px solid var(--border); border-radius: 24px; padding: 48px; display: grid; grid-template-columns: 1fr 260px; gap: 48px; align-items: center; margin-bottom: 64px; transition: box-shadow 0.3s; }
    .featured-card:hover { box-shadow: 0 12px 48px rgba(108,92,231,0.12); }
    .featured-tag { display: inline-block; font-size: 10px; font-weight: 600; letter-spacing: 0.1em; text-transform: uppercase; color: var(--purple); background: var(--purple-glow); padding: 4px 12px; border-radius: 20px; margin-bottom: 16px; }
    .featured-card h2 { font-family: 'Sora', sans-serif; font-size: 26px; font-weight: 700; line-height: 1.3; letter-spacing: -0.5px; margin-bottom: 12px; }
    .featured-card p { font-size: 14px; color: var(--muted); line-height: 1.7; margin-bottom: 28px; }
    .read-btn { display: inline-flex; align-items: center; gap: 6px; background: var(--purple); color: white; text-decoration: none; font-size: 12px; font-weight: 600; padding: 10px 22px; border-radius: 20px; transition: opacity 0.2s; }
    .read-btn:hover { opacity: 0.8; }
    .featured-visual { display: flex; align-items: center; justify-content: center; }
    .orb { width: 180px; height: 180px; border-radius: 50%; background: radial-gradient(circle at 36% 36%, var(--purple-light), var(--purple) 70%); box-shadow: 0 0 80px rgba(108,92,231,0.3), 0 0 140px rgba(108,92,231,0.15); }
    .featured-meta { margin-top: 16px; font-size: 11px; color: var(--muted); font-weight: 500; }

    .section { max-width: 1200px; margin: 0 auto; padding: 0 48px 64px; }
    .section-header { display: flex; align-items: baseline; justify-content: space-between; margin-bottom: 20px; }
    .section-title { font-family: 'Sora', sans-serif; font-size: 20px; font-weight: 700; letter-spacing: -0.3px; }
    .section-count { font-size: 11px; color: var(--muted); }
    .divider { max-width: 1200px; margin: 0 auto 48px; padding: 0 48px; border-top: 1px solid var(--border); }

    .pills { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 20px; }
    .pill { padding: 6px 16px; border-radius: 20px; border: 1px solid var(--border); font-size: 11px; font-weight: 600; color: var(--muted); cursor: pointer; transition: all 0.2s; background: var(--white); }
    .pill:hover { border-color: var(--purple-light); color: var(--purple); }
    .pill.active { background: var(--purple); color: white; border-color: var(--purple); }

    .cards-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; }
    .card { background: var(--white); border: 1px solid var(--border); border-radius: 16px; padding: 24px; text-decoration: none; color: inherit; display: flex; flex-direction: column; transition: all 0.25s; position: relative; }
    .card:hover { transform: translateY(-2px); box-shadow: 0 8px 32px rgba(108,92,231,0.1); border-color: var(--purple-light); }
    .card-source { font-size: 10px; font-weight: 600; letter-spacing: 0.1em; text-transform: uppercase; color: var(--purple); margin-bottom: 10px; }
    .card h4 { font-size: 14px; font-weight: 600; line-height: 1.45; margin-bottom: 10px; flex: 1; }
    .card p { font-size: 12px; color: var(--muted); line-height: 1.6; margin-bottom: 16px; }
    .card-footer { display: flex; justify-content: space-between; align-items: center; }
    .card-date { font-size: 10px; color: var(--muted); font-weight: 500; }
    .card-arrow { width: 24px; height: 24px; border-radius: 50%; background: var(--purple-glow); display: flex; align-items: center; justify-content: center; font-size: 11px; color: var(--purple); opacity: 0; transition: opacity 0.2s; }
    .card:hover .card-arrow { opacity: 1; }
    /* Top-scored badge */
    .card.top-pick::after { content: '★'; position: absolute; top: 16px; right: 16px; font-size: 10px; color: var(--purple-light); }

    .shimmer { background: linear-gradient(90deg, var(--border) 25%, #ededf8 50%, var(--border) 75%); background-size: 200% 100%; animation: sh 1.4s infinite; border-radius: 6px; height: 12px; margin-bottom: 10px; }
    @keyframes sh { 0%{background-position:200%} 100%{background-position:-200%} }

    footer { background: var(--white); border-top: 1px solid var(--border); text-align: center; padding: 24px; font-size: 11px; color: var(--muted); letter-spacing: 0.04em; }

    @media(max-width:900px){
      header,.hero,.wrap,.section{ padding-left:20px;padding-right:20px; }
      .hero h1{font-size:36px;}
      .featured-card{grid-template-columns:1fr;}
      .featured-visual{display:none;}
      .cards-grid{grid-template-columns:1fr;}
      nav{display:none;}
    }
  </style>
</head>
<body>

<header>
  <div class="header-inner">
    <div class="logo">SIGN<em>A</em>L</div>
    <nav>
      <a href="#" class="active" onclick="window.scrollTo(0,0);return false">All</a>
      <a href="#" onclick="goto('research');return false">Research</a>
      <a href="#" onclick="goto('tools');return false">Tools</a>
      <a href="#" onclick="goto('players');return false">Players</a>
      <a href="#" onclick="goto('policy');return false">Policy</a>
      <a href="#" onclick="goto('pharma');return false">Pharma</a>
      <a href="#" onclick="goto('business');return false">Business</a>
    </nav>
    <div class="header-right">
      <div class="live-dot"></div>
      <span id="dateDisplay"></span>
    </div>
  </div>
</header>

<div class="hero">
  <div class="hero-inner">
    <div class="hero-label">Daily AI Intelligence</div>
    <h1>The signal through<br>the <em>AI noise.</em></h1>
    <p>Curated news across research, tools, policy, pharma and the biggest players in artificial intelligence — updated every day.</p>
    <div class="hero-stats">
      <div>
        <div class="stat-num" id="totalCount"><em>—</em></div>
        <div class="stat-label">Articles Today</div>
      </div>
      <div>
        <div class="stat-num"><em>6</em></div>
        <div class="stat-label">Categories</div>
      </div>
      <div>
        <div class="stat-num"><em>30+</em></div>
        <div class="stat-label">Sources</div>
      </div>
    </div>
  </div>
</div>

<div class="wrap">
  <div class="section-eyebrow">Top Story</div>
  <div class="featured-card">
    <div>
      <div class="featured-tag" id="ftag">Loading…</div>
      <h2 id="ftitle">Fetching today's top story…</h2>
      <p id="fdesc">Finding the most important AI story of the day.</p>
      <a href="#" id="flink" class="read-btn" target="_blank" rel="noopener">Read Full Story →</a>
      <div class="featured-meta" id="fmeta"></div>
    </div>
    <div class="featured-visual"><div class="orb"></div></div>
  </div>
</div>

<div class="section" id="research">
  <div class="section-header">
    <div class="section-title">Research & Papers</div>
    <div class="section-count" id="researchCount">Loading…</div>
  </div>
  <div class="cards-grid" id="researchGrid">
    <div class="card"><div class="shimmer"></div><div class="shimmer" style="width:70%"></div><div class="shimmer" style="width:50%"></div></div>
    <div class="card"><div class="shimmer"></div><div class="shimmer" style="width:80%"></div><div class="shimmer" style="width:60%"></div></div>
    <div class="card"><div class="shimmer"></div><div class="shimmer" style="width:65%"></div><div class="shimmer" style="width:45%"></div></div>
  </div>
</div>
<div class="divider"></div>

<div class="section" id="tools">
  <div class="section-header">
    <div class="section-title">Tools & Products</div>
    <div class="section-count" id="toolsCount">Loading…</div>
  </div>
  <div class="cards-grid" id="toolsGrid">
    <div class="card"><div class="shimmer"></div><div class="shimmer" style="width:70%"></div></div>
    <div class="card"><div class="shimmer"></div><div class="shimmer" style="width:60%"></div></div>
    <div class="card"><div class="shimmer"></div><div class="shimmer" style="width:75%"></div></div>
  </div>
</div>
<div class="divider"></div>

<div class="section" id="players">
  <div class="section-header">
    <div class="section-title">Big Players</div>
    <div class="section-count" id="playersCount">Loading…</div>
  </div>
  <div class="pills">
    <div class="pill active" onclick="filterPlayer('all',this)">All</div>
    <div class="pill" onclick="filterPlayer('anthropic',this)">Anthropic</div>
    <div class="pill" onclick="filterPlayer('openai',this)">OpenAI</div>
    <div class="pill" onclick="filterPlayer('google',this)">Google</div>
    <div class="pill" onclick="filterPlayer('microsoft',this)">Microsoft</div>
    <div class="pill" onclick="filterPlayer('meta',this)">Meta</div>
    <div class="pill" onclick="filterPlayer('nvidia',this)">NVIDIA</div>
  </div>
  <div class="cards-grid" id="playersGrid">
    <div class="card"><div class="shimmer"></div><div class="shimmer" style="width:70%"></div></div>
    <div class="card"><div class="shimmer"></div><div class="shimmer" style="width:80%"></div></div>
    <div class="card"><div class="shimmer"></div><div class="shimmer" style="width:60%"></div></div>
  </div>
</div>
<div class="divider"></div>

<div class="section" id="policy">
  <div class="section-header">
    <div class="section-title">Policy & Ethics</div>
    <div class="section-count" id="policyCount">Loading…</div>
  </div>
  <div class="cards-grid" id="policyGrid"></div>
</div>
<div class="divider"></div>

<div class="section" id="pharma">
  <div class="section-header">
    <div class="section-title">AI in Pharma & Bio</div>
    <div class="section-count" id="pharmaCount">Loading…</div>
  </div>
  <div class="cards-grid" id="pharmaGrid"></div>
</div>
<div class="divider"></div>

<div class="section" id="business">
  <div class="section-header">
    <div class="section-title">Business & Industry</div>
    <div class="section-count" id="businessCount">Loading…</div>
  </div>
  <div class="cards-grid" id="businessGrid"></div>
</div>

<footer>
  SIGNAL — AI News &nbsp;·&nbsp; 30+ sources · Ranked by relevance & source prestige &nbsp;·&nbsp; Updated daily
</footer>

<script>
document.getElementById('dateDisplay').textContent = new Date().toLocaleDateString('en-US',{month:'short',day:'numeric',year:'numeric'});

// ── DATE-SEEDED RNG ──────────────────────────────────────────────────────────
function getDaySeed() {
  const d = new Date();
  return d.getFullYear() * 10000 + (d.getMonth() + 1) * 100 + d.getDate();
}
function seededRng(seed) {
  let s = seed;
  return () => { s = (s * 1664525 + 1013904223) & 0xffffffff; return (s >>> 0) / 0xffffffff; };
}
const rng = seededRng(getDaySeed());
function seededShuffle(arr) {
  const a = [...arr];
  for (let i = a.length - 1; i > 0; i--) { const j = Math.floor(rng() * (i + 1)); [a[i], a[j]] = [a[j], a[i]]; }
  return a;
}

// ── SOURCE PRESTIGE SCORES ───────────────────────────────────────────────────
const PRESTIGE = {
  // Tier 1 — top academic & journalism (10)
  'Nature': 10, 'Science': 10, 'The Economist': 10, 'MIT Tech Review': 10,
  'WSJ': 10, 'Financial Times': 10, 'The Atlantic': 10,
  // Tier 2 — strong specialist (8)
  'Anthropic': 8, 'OpenAI': 8, 'Google': 8, 'arXiv': 8,
  'Bloomberg': 8, 'STAT News': 8, 'IEEE Spectrum': 8, 'Distill': 8,
  // Tier 3 — good tech press (6)
  'Microsoft': 6, 'Meta': 6, 'NVIDIA': 6, 'Wired': 6,
  'Ars Technica': 6, 'New Scientist': 6, 'Semantic Scholar': 6,
  'BioPharma Dive': 6, 'Nature Biotech': 6,
  // Tier 4 — solid but broad (4)
  'TechCrunch': 4, 'The Verge': 4, 'VentureBeat': 4, 'Fortune': 4,
  'Fierce Biotech': 4, 'Drug Discovery Today': 4, 'Brookings': 4,
  // Tier 5 — trade / corporate (2)
  'ZDNet': 2, 'InfoWorld': 2, 'Business Insider': 2,
  'Pfizer': 2, 'Novartis': 2, 'Roche': 2, 'AstraZeneca': 2, 'Mistral': 2,
};

// ── KEYWORD RELEVANCE SCORES ─────────────────────────────────────────────────
// Each keyword match adds to the score. More specific = more points.
const KEYWORDS = [
  // High value — specific AI topics (3pts each)
  { re: /\b(large language model|LLM|foundation model|transformer|GPT|claude|gemini|llama|mistral|grok)\b/i, pts: 3 },
  { re: /\b(reinforcement learning|RLHF|fine.?tuning|pre.?training|alignment)\b/i, pts: 3 },
  { re: /\b(drug discovery|protein folding|alphafold|clinical trial|genomics|biomarker)\b/i, pts: 3 },
  { re: /\b(regulation|legislation|executive order|AI act|policy|governance|safety)\b/i, pts: 3 },
  // Medium value — general AI (2pts each)
  { re: /\b(artificial intelligence|machine learning|deep learning|neural network|AI model)\b/i, pts: 2 },
  { re: /\b(benchmark|state.of.the.art|outperforms|surpasses|breakthrough)\b/i, pts: 2 },
  { re: /\b(open.?source|open.?weight|release|launch|announce|deploy)\b/i, pts: 2 },
  { re: /\b(reasoning|multimodal|vision|robotics|autonomous|agent)\b/i, pts: 2 },
  // Lower value — broad tech (1pt each)
  { re: /\b(AI|ML|data|compute|chip|GPU|semiconductor|startup|funding|billion)\b/i, pts: 1 },
  { re: /\b(research|paper|study|scientists|researchers|lab|institute)\b/i, pts: 1 },
];

function scoreArticle(article) {
  const prestigeScore = PRESTIGE[article.source] || 1;
  const text = (article.title + ' ' + article.desc).toLowerCase();
  const keywordScore = KEYWORDS.reduce((sum, k) => sum + (k.re.test(text) ? k.pts : 0), 0);
  return prestigeScore + keywordScore;
}

// ── TITLE CLEANER ────────────────────────────────────────────────────────────
function cleanTitle(title) {
  let t = title;
  t = t.replace(/\[PDF\]/gi, '');
  t = t.replace(/\[Preprint\]/gi, '');
  t = t.replace(/\[v\d+\]/gi, '');
  t = t.replace(/arXiv:\d+\.\d+v?\d*/gi, '');
  t = t.replace(/\(\d{4}\.\d+\)/g, '');
  t = t.replace(/\s+by\s+[A-Z][a-z]+,?\s+[A-Z][\.,].*?(et al\.?)?/g, '');
  t = t.replace(/\s*[\|\-–]\s*(Nature|Science|Cell|PNAS|NEJM|Lancet|JAMA|NeurIPS|ICML|ICLR|CVPR)[\s\d]*/gi, '');
  t = t.replace(/&amp;/g, '&').replace(/&lt;/g, '<').replace(/&gt;/g, '>').replace(/&quot;/g, '"').replace(/&#39;/g, "'").replace(/&nbsp;/g, ' ');
  t = t.replace(/\s+/g, ' ').trim();
  if (t.length > 0) t = t.charAt(0).toUpperCase() + t.slice(1);
  if (t.length < 15) t = title.replace(/&amp;/g, '&').replace(/\s+/g, ' ').trim();
  return t;
}

// ── FRESHNESS FILTER ─────────────────────────────────────────────────────────
const TWO_WEEKS_MS = 14 * 24 * 60 * 60 * 1000;
function isFresh(article) {
  if (!article.date) return true; // no date = keep it, can't judge
  const published = new Date(article.date);
  if (isNaN(published)) return true;
  return (Date.now() - published.getTime()) <= TWO_WEEKS_MS;
}

// ── SELECT BEST ARTICLES ─────────────────────────────────────────────────────
// Score all, sort descending, then ensure source diversity (max 2 per source)
function selectBest(articles, max = 9) {
  // Drop anything older than 2 weeks first
  articles = articles.filter(isFresh);
  // Score every article
  const scored = articles.map(a => ({ ...a, _score: scoreArticle(a) }));

  // Sort by score descending
  scored.sort((a, b) => b._score - a._score);

  // Pick top articles, but cap at 2 per source to keep diversity
  const sourceCounts = {};
  const selected = [];
  for (const a of scored) {
    if (selected.length >= max) break;
    sourceCounts[a.source] = (sourceCounts[a.source] || 0);
    if (sourceCounts[a.source] < 2) {
      selected.push(a);
      sourceCounts[a.source]++;
    }
  }

  // If we couldn't fill 9 with diversity cap, fill remaining from leftovers
  if (selected.length < max) {
    for (const a of scored) {
      if (selected.length >= max) break;
      if (!selected.includes(a)) selected.push(a);
    }
  }

  return selected;
}

// ── FEEDS ────────────────────────────────────────────────────────────────────
const FEEDS = {
  research: [
    {url:'https://arxiv.org/rss/cs.AI',  label:'arXiv · AI',      name:'arXiv'},
    {url:'https://arxiv.org/rss/cs.LG',  label:'arXiv · ML',      name:'arXiv'},
    {url:'https://arxiv.org/rss/cs.CL',  label:'arXiv · NLP',     name:'arXiv'},
    {url:'https://arxiv.org/rss/cs.CV',  label:'arXiv · Vision',  name:'arXiv'},
    {url:'https://arxiv.org/rss/cs.RO',  label:'arXiv · Robotics',name:'arXiv'},
    {url:'https://distill.pub/rss.xml',  label:'Distill',         name:'Distill'},
  ],
  tools: [
    {url:'https://techcrunch.com/category/artificial-intelligence/feed/', label:'TechCrunch',  name:'TechCrunch'},
    {url:'https://www.theverge.com/rss/ai-artificial-intelligence/index.xml', label:'The Verge', name:'The Verge'},
    {url:'https://venturebeat.com/category/ai/feed/',  label:'VentureBeat', name:'VentureBeat'},
    {url:'https://feeds.arstechnica.com/arstechnica/technology-lab', label:'Ars Technica', name:'Ars Technica'},
    {url:'https://www.zdnet.com/topic/artificial-intelligence/rss.xml', label:'ZDNet', name:'ZDNet'},
    {url:'https://www.infoworld.com/category/artificial-intelligence/index.rss', label:'InfoWorld', name:'InfoWorld'},
  ],
  policy: [
    {url:'https://www.technologyreview.com/feed/',     label:'MIT Tech Review', name:'MIT Tech Review'},
    {url:'https://www.brookings.edu/topic/artificial-intelligence/feed/', label:'Brookings', name:'Brookings'},
    {url:'https://theatlantic.com/feed/all/',          label:'The Atlantic',    name:'The Atlantic'},
    {url:'https://www.economist.com/science-and-technology/rss.xml', label:'The Economist', name:'The Economist'},
    {url:'https://www.newscientist.com/subject/technology/feed/', label:'New Scientist', name:'New Scientist'},
    {url:'https://spectrum.ieee.org/feeds/topic/artificial-intelligence.rss', label:'IEEE Spectrum', name:'IEEE Spectrum'},
  ],
  business: [
    {url:'https://feeds.a.dj.com/rss/RSSWSJD.xml',    label:'WSJ Tech',        name:'WSJ'},
    {url:'https://www.wired.com/feed/tag/ai/latest/rss', label:'Wired',         name:'Wired'},
    {url:'https://fortune.com/feed/',                  label:'Fortune',         name:'Fortune'},
    {url:'https://feeds.bloomberg.com/technology/news.rss', label:'Bloomberg Tech', name:'Bloomberg'},
    {url:'https://www.ft.com/technology?format=rss',   label:'FT Tech',         name:'Financial Times'},
    {url:'https://www.businessinsider.com/rss',        label:'Business Insider',name:'Business Insider'},
  ],
  pharma: [
    {url:'https://www.nature.com/natmachintell.rss',   label:'Nature MI',       name:'Nature'},
    {url:'https://www.nature.com/nbt/rss/current',     label:'Nature Biotech',  name:'Nature'},
    {url:'https://www.statnews.com/feed/',             label:'STAT News',       name:'STAT News'},
    {url:'https://www.fiercebiotech.com/rss/xml',      label:'Fierce Biotech',  name:'Fierce Biotech'},
    {url:'https://www.biopharmadive.com/feeds/news/',  label:'BioPharma Dive',  name:'BioPharma Dive'},
    {url:'https://www.drugdiscoverytoday.com/rss/news',label:'Drug Discovery Today', name:'Drug Discovery Today'},
    {url:'https://www.pfizer.com/news/press-release/rss', label:'Pfizer',       name:'Pfizer'},
    {url:'https://www.novartis.com/rss/news.xml',      label:'Novartis',        name:'Novartis'},
    {url:'https://www.roche.com/rss/media.xml',        label:'Roche',           name:'Roche'},
    {url:'https://www.astrazeneca.com/media-centre/press-releases.rss', label:'AstraZeneca', name:'AstraZeneca'},
  ],
  players: [
    {url:'https://www.anthropic.com/rss.xml',          label:'Anthropic',  name:'Anthropic',  player:'anthropic'},
    {url:'https://openai.com/news/rss.xml',            label:'OpenAI',     name:'OpenAI',     player:'openai'},
    {url:'https://blog.google/technology/ai/rss/',     label:'Google AI',  name:'Google',     player:'google'},
    {url:'https://blogs.microsoft.com/ai/feed/',       label:'Microsoft AI',name:'Microsoft', player:'microsoft'},
    {url:'https://ai.meta.com/blog/rss/',              label:'Meta AI',    name:'Meta',       player:'meta'},
    {url:'https://blogs.nvidia.com/feed/',             label:'NVIDIA',     name:'NVIDIA',     player:'nvidia'},
    {url:'https://mistral.ai/feed.xml',                label:'Mistral',    name:'Mistral',    player:'other'},
  ],
};

let all = {};

async function fetchFeed(f) {
  try {
    const res = await fetch(`/api/feed?url=${encodeURIComponent(f.url)}`);
    if (!res.ok) return [];
    const text = await res.text();
    const xml = new DOMParser().parseFromString(text, 'text/xml');
    return [...xml.querySelectorAll('item, entry')].slice(0, 10).map(n => ({
      title: cleanTitle(n.querySelector('title')?.textContent?.trim() || 'Untitled'),
      link:  n.querySelector('link')?.textContent?.trim() || n.querySelector('link')?.getAttribute('href') || '#',
      desc:  (n.querySelector('description,summary')?.textContent || '').replace(/<[^>]+>/g,'').trim().slice(0,150) + '…',
      date:  n.querySelector('pubDate,published,updated')?.textContent?.trim() || '',
      label: f.label, source: f.name, player: f.player || null,
    }));
  } catch { return []; }
}

function fmt(s) {
  if (!s) return '—';
  try { return new Date(s).toLocaleDateString('en-US',{month:'short',day:'numeric'}); }
  catch { return s.slice(0,10); }
}

function card(a) {
  const isTopPick = a._score >= 12;
  return `<a class="card${isTopPick ? ' top-pick' : ''}" href="${a.link}" target="_blank" rel="noopener">
    <div class="card-source">${a.label}</div>
    <h4>${a.title}</h4>
    <p>${a.desc}</p>
    <div class="card-footer"><span class="card-date">${fmt(a.date)}</span><span class="card-arrow">↗</span></div>
  </a>`;
}

function render(articles, gid, cid) {
  const best = selectBest(articles, 9);
  document.getElementById(gid).innerHTML = best.length
    ? best.map(card).join('')
    : `<div class="card" style="grid-column:1/-1;color:var(--muted);font-size:13px;padding:32px;">No articles loaded.</div>`;
  const fresh = articles.filter(isFresh).length;
  if (cid) document.getElementById(cid).textContent = fresh + ' fresh articles · showing top 9';
}

function goto(id) { document.getElementById(id)?.scrollIntoView({behavior:'smooth',block:'start'}); }

function filterPlayer(p, el) {
  document.querySelectorAll('.pill').forEach(x => x.classList.remove('active'));
  el.classList.add('active');
  render(p === 'all' ? all.players : all.players.filter(a => a.player === p), 'playersGrid', 'playersCount');
}

async function loadAll() {
  await Promise.all(Object.keys(FEEDS).map(async cat => {
    const results = await Promise.allSettled(FEEDS[cat].map(fetchFeed));
    all[cat] = results.flatMap(r => r.status === 'fulfilled' ? r.value : []).filter(a => a.title !== 'Untitled');
  }));

  render(all.research || [], 'researchGrid', 'researchCount');
  render(all.tools    || [], 'toolsGrid',    'toolsCount');
  render(all.players  || [], 'playersGrid',  'playersCount');
  render(all.policy   || [], 'policyGrid',   'policyCount');
  render(all.pharma   || [], 'pharmaGrid',   'pharmaCount');
  render(all.business || [], 'businessGrid', 'businessCount');

  // Hero = highest scored article across players + tools + research
  const heroPool = [...(all.players||[]), ...(all.tools||[]), ...(all.research||[])]
    .map(a => ({...a, _score: scoreArticle(a)}))
    .sort((a,b) => b._score - a._score);

  const hero = heroPool[0];
  if (hero) {
    document.getElementById('ftag').textContent   = hero.label;
    document.getElementById('ftitle').textContent = hero.title;
    document.getElementById('fdesc').textContent  = hero.desc;
    document.getElementById('flink').href         = hero.link;
    document.getElementById('fmeta').textContent  = fmt(hero.date) + ' · ' + hero.source;
  }

  const total = Object.values(all).flat().length;
  document.getElementById('totalCount').innerHTML = `<em>${total}</em>`;
}

loadAll();
</script>
</body>
</html>
Claude
